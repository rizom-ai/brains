/* Default font imports */
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap');

/* Theme Layer - CSS Custom Properties for theming */
@layer theme {
  :root {
    /* ============================================
       BASE COLOR PALETTE - Define colors once
       All colors from Figma design system
       ============================================ */

    /* Brand Blues */
    --palette-brand-blue: #3921D7;           /* Primary brand blue */
    --palette-brand-blue-dark-1: #2E007D;    /* Dark blue 1 */
    --palette-brand-blue-dark-2: #0E0027;    /* Dark blue 2 */
    --palette-indigo: #6366f1;               /* Indigo for patterns */

    /* Brand Orange */
    --palette-orange: #E7640A;               /* Primary orange */
    --palette-orange-dark: #c2410c;          /* Dark orange */
    --palette-orange-medium: #FFA366;        /* Medium orange for dark mode emphasis */

    /* Neutrals - Light */
    --palette-white: #FFFFFF;
    --palette-warm-white: #FFFCF6;
    --palette-warm-beige: #FFEFDA;
    --palette-light-blue: #A8C4FF;
    --palette-gray-border: #e2e8f0;

    /* Neutrals - Dark */
    --palette-dark-bg: #0f1114;
    --palette-dark-bg-subtle: #1a1d23;
    --palette-dark-bg-muted: #2d3748;
    --palette-black: #000000;

    /* Warning/Status Colors */
    --palette-warning-light: #fefce8;
    --palette-warning: #facc15;
    --palette-warning-dark: #ca8a04;
    --palette-warning-text: #854d0e;
    --palette-warning-border: #fde047;

    /* Dark mode gradient colors */
    --palette-purple: #6B2FA0;
    --palette-warm-red: #8B3A1A;
    --palette-dark-purple: #2A1F3A;

    /* Dark mode text colors */
    --palette-text-light: #f7fafc;
    --palette-text-muted-dark: #a0aec0;
    --palette-text-subtle-dark: #718096;
    --palette-light-orange: #FFE0BD;      /* Very light peach for dark mode headings */

    /* ============================================
       SEMANTIC COLORS - Reference base palette
       ============================================ */

    /* Brand Colors */
    --color-brand: var(--palette-brand-blue);
    --color-brand-dark: var(--palette-brand-blue-dark-1);
    --color-brand-light: var(--palette-brand-blue);
    --color-accent: var(--palette-orange);
    --color-accent-dark: var(--palette-orange-dark);

    /* Pattern Colors */
    --color-pattern-dot: var(--palette-indigo);

    /* Text Colors */
    --color-text: var(--palette-brand-blue-dark-2);
    --color-text-muted: var(--palette-brand-blue-dark-1);
    --color-text-light: var(--palette-brand-blue);
    --color-text-inverse: var(--palette-white);
    --color-heading: var(--palette-brand-blue-dark-1);  /* Heading color */

    /* Background Colors */
    --color-bg: var(--palette-white);
    --color-bg-subtle: var(--palette-warm-white);
    --color-bg-muted: var(--palette-warm-beige);
    --color-bg-dark: var(--palette-brand-blue-dark-1);

    /* Gradient Colors */
    --color-gradient-start: var(--palette-warm-white);
    --color-gradient-end: var(--palette-light-blue);
    --color-bg-gradient: linear-gradient(
      181deg,
      var(--palette-white) -5.4%,
      var(--palette-warm-white) 73.01%,
      var(--palette-warm-beige) 89.61%,
      var(--palette-light-blue) 150%
    );

    /* Border Colors */
    --color-border: var(--palette-gray-border);
    --color-border-light: rgba(255, 255, 255, 0.8);

    /* Footer */
    --color-footer: var(--palette-brand-blue);

    /* Warning/Status Colors */
    --color-warning-bg: var(--palette-warning-light);
    --color-warning-border: var(--palette-warning-border);
    --color-warning-text: var(--palette-warning-text);
    --color-warning-text-emphasis: #92400e;

    /* Typography */
    --font-sans: 'Plus Jakarta Sans', ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
    --font-heading: 'Space Grotesk', 'Plus Jakarta Sans', ui-sans-serif, system-ui, sans-serif;
    --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

    /* Typography Scale - For presentations and large displays */
    --text-h1: 8rem;          /* 128px Desktop - bold impact */
    --text-h1-mobile: 3.75rem; /* 60px Mobile */
    --text-h2: 4.5rem;        /* 72px Desktop */
    --text-h2-mobile: 3rem;   /* 48px Mobile */
    --text-h3: 3rem;          /* 48px Desktop */
    --text-h3-mobile: 2.25rem; /* 36px Mobile */
    --text-h4: 1.875rem;      /* 30px */
    --text-body: 1.875rem;    /* 30px Desktop - for presentations */
    --text-body-mobile: 1.5rem; /* 24px Mobile */
  }

  /* Dark theme */
  [data-theme="dark"] {
    /* Brand Colors - Same as light mode */
    --color-brand: var(--palette-brand-blue);
    --color-brand-dark: var(--palette-brand-blue-dark-1);
    --color-brand-light: var(--palette-brand-blue);
    --color-accent: var(--palette-orange);
    --color-accent-dark: var(--palette-orange-dark);

    /* Pattern Colors - Same as light mode */
    --color-pattern-dot: var(--palette-indigo);

    /* Text Colors - Dark mode */
    --color-text: var(--palette-text-light);
    --color-text-muted: var(--palette-text-muted-dark);
    --color-text-light: var(--palette-text-subtle-dark);
    --color-text-inverse: var(--palette-white);  /* White text on dark backgrounds */
    --color-heading: var(--palette-light-orange);  /* Light orange for dark mode headings */

    /* Background Colors - Dark mode */
    --color-bg: var(--palette-dark-bg);
    --color-bg-subtle: var(--palette-dark-bg-subtle);
    --color-bg-muted: var(--palette-dark-bg-muted);
    --color-bg-dark: var(--palette-black);

    /* Gradient Colors - Dark mode */
    --color-gradient-start: var(--palette-dark-bg-subtle);
    --color-gradient-end: var(--palette-purple);
    --color-bg-gradient: linear-gradient(
      181deg,
      var(--palette-brand-blue) -5.4%,
      var(--palette-purple) 40%,
      var(--palette-warm-red) 73.01%,
      var(--palette-purple) 140%
    );

    /* Border Colors - Dark mode */
    --color-border: var(--palette-dark-bg-muted);
    --color-border-light: rgba(255, 255, 255, 0.1);

    /* Footer - Dark mode uses dark purple for grounded feel */
    --color-footer: var(--palette-dark-purple);

    /* Warning/Status Colors - Dark mode */
    --color-warning-bg: rgba(202, 138, 4, 0.2);
    --color-warning-border: rgba(202, 138, 4, 0.5);
    --color-warning-text: #fde047;
    --color-warning-text-emphasis: #fef08a;
  }
}

/* ============================================
   THEME TOKENS - Exposed to Tailwind v4

   Uses @theme inline for RUNTIME CSS variable resolution.
   The "inline" keyword is critical - it makes Tailwind use var(--color-brand)
   in the generated CSS instead of resolving the value at build time.
   This enables dark mode and multi-site theming to work correctly.

   Auto-generates utilities like:
   - bg-brand, text-brand, border-brand, ring-brand, fill-brand
   - Plus all variants: hover:, focus:, dark:, etc.

   Only include colors where bg/text/border all use the SAME variable.
   For colors where bg and text need different values (like "theme"),
   use manual utilities below in @layer utilities.
   ============================================ */
@theme inline {
  /* Brand colors - same color for bg/text/border */
  --color-brand: var(--color-brand);
  --color-brand-dark: var(--color-brand-dark);
  --color-brand-light: var(--color-brand-light);
  --color-accent: var(--color-accent);
  --color-accent-dark: var(--color-accent-dark);

  /* Footer */
  --color-footer: var(--color-footer);

  /* Gradient colors */
  --color-gradient-start: var(--color-gradient-start);
  --color-gradient-end: var(--color-gradient-end);

  /* Pattern colors */
  --color-pattern-dot: var(--color-pattern-dot);

  /* Prose/Typography colors - for @tailwindcss/typography plugin */
  --tw-prose-body: var(--color-text);
  --tw-prose-headings: var(--color-heading);
  --tw-prose-links: var(--color-brand);
  --tw-prose-bold: var(--color-text);
  --tw-prose-code: var(--color-text);
  --tw-prose-quotes: var(--color-text-muted);
  --tw-prose-counters: var(--color-text-muted);
  --tw-prose-bullets: var(--color-text-muted);
}

/* ============================================
   SPECIAL UTILITIES - Manual definitions needed

   These utilities CAN'T be auto-generated by @theme inline because:
   1. bg-theme and text-theme need DIFFERENT variables (bg uses --color-bg, text uses --color-text)
   2. Some utilities use complete gradient values, not single colors
   3. Some utilities are context-specific (conditional on parent class)

   Why not auto-generate?
   If we put --color-theme: var(--color-bg) in @theme inline,
   then text-theme would also use --color-bg (wrong - text needs --color-text).
   ============================================ */
@layer utilities {
  /* Theme utilities - bg uses --color-bg, text uses --color-text */
  .bg-theme { background-color: var(--color-bg); }
  .bg-theme-subtle { background-color: var(--color-bg-subtle); }
  .bg-theme-muted { background-color: var(--color-bg-muted); }
  .bg-theme-dark { background-color: var(--color-bg-dark); }
  .bg-surface { background-color: var(--color-bg-subtle); } /* Alias for bg-theme-subtle */
  .text-theme { color: var(--color-text); }
  .text-theme-muted { color: var(--color-text-muted); }
  .text-theme-light { color: var(--color-text-light); }
  .text-theme-inverse { color: var(--color-text-inverse); }
  .text-heading { color: var(--color-heading); }
  .border-theme { border-color: var(--color-border); }
  .border-theme-light { border-color: var(--color-border-light); }
  .placeholder-theme-muted::placeholder { color: var(--color-text-muted); }

  /* Warning utilities - theme-aware */
  .bg-warning { background-color: var(--color-warning-bg); }
  .border-warning { border-color: var(--color-warning-border); }
  .text-warning { color: var(--color-warning-text); }
  .text-warning-emphasis { color: var(--color-warning-text-emphasis); }

  /* Hover states for theme utilities */
  .hover\:bg-theme-subtle:hover { background-color: var(--color-bg-subtle); }
  .hover\:bg-brand:hover { background-color: var(--color-brand); }
  .hover\:bg-brand-dark:hover { background-color: var(--color-brand-dark); }

  /* Complete gradient background - uses full gradient value, not single color */
  .bg-theme-gradient { background: var(--color-bg-gradient); }

  /* Navigation text - brand in light mode, accent in dark mode */
  .text-nav { color: var(--color-brand); }
  [data-theme="dark"] .text-nav { color: var(--color-accent); }

  /* Logo text - brand in light mode, white in dark mode */
  .text-logo { color: var(--color-brand); }
  [data-theme="dark"] .text-logo { color: var(--palette-white); }

  /* Logo color variable - brand in light mode, white in dark mode */
  :root {
    --color-logo: var(--color-brand);
  }
  [data-theme="dark"] {
    --color-logo: var(--palette-white);
  }

  /* Header background - theme bg in light, brand blue in dark */
  .bg-header { background-color: var(--color-bg); }
  [data-theme="dark"] .bg-header { background-color: var(--color-brand); }

  /* Theme toggle background - blue in light mode, orange in dark mode */
  .bg-theme-toggle { background-color: var(--color-brand); }
  [data-theme="dark"] .bg-theme-toggle { background-color: var(--color-accent); }

  /* Theme toggle hover - orange in light, white in dark */
  .bg-theme-toggle-hover { background-color: var(--color-accent); }
  [data-theme="dark"] .bg-theme-toggle-hover { background-color: var(--palette-white); }

  /* Theme toggle icon color - white in both modes by default */
  .text-theme-toggle-icon { color: var(--palette-white); }

  /* Theme toggle icon hover - stays white in light, becomes brand in dark */
  [data-theme="dark"] .bg-theme-toggle-hover .text-theme-toggle-icon { color: var(--color-brand); }
  
  /* Gradients - Tailwind v4 format */
  .from-gradient-start { 
    --tw-gradient-from: var(--color-gradient-start);
    --tw-gradient-to: rgb(from var(--color-gradient-start) r g b / 0);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .to-gradient-end { 
    --tw-gradient-to: var(--color-gradient-end);
  }
  .from-accent { 
    --tw-gradient-from: var(--color-accent);
    --tw-gradient-to: rgb(from var(--color-accent) r g b / 0);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .to-accent-dark { 
    --tw-gradient-to: var(--color-accent-dark);
  }
  .from-brand-dark { 
    --tw-gradient-from: var(--color-brand-dark);
    --tw-gradient-to: rgb(from var(--color-brand-dark) r g b / 0);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .from-brand-light { 
    --tw-gradient-from: var(--color-brand-light);
    --tw-gradient-to: rgb(from var(--color-brand-light) r g b / 0);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  .to-brand { 
    --tw-gradient-to: var(--color-brand);
  }
  .to-theme { 
    --tw-gradient-to: var(--color-bg);
  }
}

/* Prose styles for dark mode */
@layer utilities {
  .prose {
    color: var(--color-text);
  }

  /* Main headings - Blue/Dark 1 (#2E007D) */
  .prose h1 {
    color: var(--color-text-muted);
    font-family: var(--font-heading);
    font-weight: 700;
    font-size: 90px;
    line-height: 1;
    letter-spacing: -0.02em;
  }

  .prose h2 {
    color: var(--color-text-muted);
    font-family: var(--font-heading);
    font-weight: 700;
    font-size: 72px;
    line-height: 1;
    letter-spacing: -0.02em;
    border-bottom: none;
    text-decoration: none;
  }

  /* Subheadings - Blue/Primary (#3921D7) */
  .prose h3 {
    color: var(--color-text-light);
    font-family: var(--font-heading);
    font-weight: 700;
    font-size: 50px;
    line-height: 1;
    letter-spacing: -0.01em;
  }

  .prose h4 {
    color: var(--color-text-light);
    font-family: var(--font-heading);
    font-weight: 700;
    font-size: 40px;
    line-height: 1.1;
    letter-spacing: -0.01em;
  }

  .prose h5,
  .prose h6 {
    color: var(--color-text-light);
    font-family: var(--font-heading);
    font-weight: 700;
    font-size: 32px;
    line-height: 1.2;
  }

  /* Body text - Blue/Dark 2 (#0E0027) */
  .prose p {
    color: var(--color-text);
  }
  
  .prose strong {
    color: var(--color-text);
  }
  
  .prose em {
    color: var(--color-accent);
  }

  /* Blockquote attribution styling */
  .prose cite.block-attribution {
    display: block;
    font-size: 1rem;
    font-weight: 300;
    font-style: normal;
    color: var(--color-text-muted);
    margin-top: 0.5rem;
    margin-bottom: 2rem;
    padding-left: 0;
  }

  .prose cite.block-attribution .emdash {
    color: var(--color-brand);
    margin-right: 0.125rem;
  }

  .prose cite.block-attribution a {
    color: var(--color-text-muted);
    text-decoration: underline;
  }

  .prose cite.block-attribution a:hover {
    color: var(--color-brand);
  }

  .prose code {
    color: var(--color-text);
    background-color: var(--color-bg-muted);
  }
  
  .prose pre {
    background-color: var(--color-bg-muted);
    color: var(--color-text);
  }
  
  .prose a {
    color: var(--color-brand);
  }
  
  .prose a:hover {
    color: var(--color-brand-dark);
  }

  /* Dark mode heading colors - lighter peach for contrast across gradient */
  [data-theme="dark"] .prose h1,
  [data-theme="dark"] .prose h2 {
    color: var(--palette-light-orange);
  }

  [data-theme="dark"] .prose h3,
  [data-theme="dark"] .prose h4,
  [data-theme="dark"] .prose h5,
  [data-theme="dark"] .prose h6 {
    color: var(--palette-warm-white);
  }

  /* Dark mode italic - medium orange for emphasis */
  [data-theme="dark"] .prose em {
    color: var(--palette-orange-medium);
  }
}

/* Hero Background Components */
@layer components {
  /* Hero background pattern (dot grid) */
  .hero-bg-pattern {
    background-image: radial-gradient(circle at 1px 1px, var(--color-pattern-dot) 1px, transparent 0);
    background-size: 20px 20px;
  }

  /* CTA background pattern (larger dots) */
  .cta-bg-pattern {
    background-image: radial-gradient(circle at 2px 2px, rgba(255, 255, 255, 0.15) 1px, transparent 0);
    background-size: 40px 40px;
  }
}

/* Blob Animations */
@keyframes blob {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

/* Marquee Animations â€” continuous scrolling text */
@keyframes marquee {
  from { transform: translateX(0); }
  to { transform: translateX(-33.333%); }
}

@keyframes marquee-reverse {
  from { transform: translateX(-33.333%); }
  to { transform: translateX(0); }
}

/* Hero entrance animation */
@keyframes hero-fade-up {
  from { opacity: 0; transform: translateY(24px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Animation utilities */
@layer utilities {
  .animate-blob {
    animation: blob 7s infinite;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }

  .animate-marquee {
    animation: marquee 35s linear infinite;
  }

  .animate-marquee-reverse {
    animation: marquee-reverse 45s linear infinite;
  }

  .hero-stagger-1 {
    animation: hero-fade-up 0.8s ease-out 0.15s both;
  }

  .hero-stagger-2 {
    animation: hero-fade-up 0.6s ease-out 0.4s both;
  }

  .hero-stagger-3 {
    animation: hero-fade-up 0.6s ease-out 0.6s both;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-marquee,
    .animate-marquee-reverse {
      animation: none;
    }

    .hero-stagger-1,
    .hero-stagger-2,
    .hero-stagger-3 {
      animation: none;
      opacity: 1;
    }
  }
}

/* Theme toggle icon visibility */
@layer utilities {
  /* Show sun in dark mode, moon in light mode */
  [data-theme="dark"] .sun-icon {
    display: block;
  }
  [data-theme="dark"] .moon-icon {
    display: none;
  }
  [data-theme="light"] .sun-icon {
    display: none;
  }
  [data-theme="light"] .moon-icon {
    display: block;
  }
}

/* Focus ring utilities for accessibility */
@layer utilities {
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-2;
  }

  /* Focus ring for dark/brand backgrounds */
  .focus-ring-light {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-brand;
  }
}

/* Component utilities for consistency and code reduction */
@layer utilities {
  /* Widget containers - standardized with rounded-lg */
  .widget-container {
    background-color: var(--color-bg-subtle);
    border-radius: var(--radius-lg);
    padding: 1rem;
  }

  /* Form inputs - consistent styling */
  .form-input {
    padding: 0.5rem 1rem;
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-text-muted);
    background-color: var(--color-bg);
    color: var(--color-text);
    transition-property: color, background-color, border-color;
    transition-duration: 150ms;
  }
  .form-input::placeholder { color: var(--color-text-muted); }
  .form-input:focus { outline: none; box-shadow: 0 0 0 2px var(--color-brand); }
  .form-input:disabled { opacity: 0.5; }

  /* Primary button - consistent styling */
  .btn-primary {
    padding: 0.5rem 1rem;
    border-radius: var(--radius-lg);
    background-color: var(--color-brand);
    color: var(--color-text-inverse);
    font-weight: 500;
    transition-property: color, background-color, border-color;
    transition-duration: 150ms;
  }
  .btn-primary:hover { background-color: var(--color-brand-dark); }
  .btn-primary:disabled { opacity: 0.5; }

  /* Pagination controls */
  .pagination-btn {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text);
    border-radius: var(--radius-lg);
    transition-property: color, background-color, border-color;
    transition-duration: 150ms;
  }
  .pagination-btn:hover {
    color: var(--color-brand);
    background-color: var(--color-bg-subtle);
  }
  .pagination-btn-active {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-brand);
    background-color: var(--color-bg-subtle);
    border-radius: var(--radius-lg);
  }
}